<tr id="table_filter_subnet">
  <td>
    Only show subnet:
  </td>
  <td>
    <span id="subnetOpts"></span>
  </td>
</tr>


<script>
  var options = '';

  $.ajax({
  async: false,
  dataType: "json",
  url: "api/filter/subnet/getall",
  success: function(j){
  for (var i = 0; i < j.length; i++) {
		      options += '<option value="' + j[i].optionValue + '">' + j[i].optionDisplay + '</option>';
		      }
		      }
		      });

  var htmlFormSubnet = '\
<form action="">\
  <select name="id" id="ipLoc">\
    <option value="">** Select location **</option>' + options + '\
  </select>\
  <select name="sub_id" id="subnet">\
    <option value="0"></option>\
  </select>\
</form>\
';

   $("#subnetOpts").html(htmlFormSubnet);

   $("select#ipLoc").bind('change keyup keydown', function(){
     $("select#subnet").html('');
     $.getJSON("api/filter/subnet/get",{id: $(this).val(), type: 'subnet'}, function(j){
       var options = '';
       options += '<option value=""></option>';
       for (var i = 0; i < j.length; i++) {
         options += '<option value="' + j[i].optionVlanID + '">' + j[i].optionName + ' - ' + j[i].optionNetwork + '</option>';
       }
       $("select#subnet").html(options);
     })
     oTable.fnDraw();
   })


   $("select#subnet").bind('change keyup keydown', function(){
     oTable.fnDraw();
   })



</script>
